<!DOCTYPE html>
<html>
    <head>
        <title><?= $this->language('l_tbbida') ?></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="mobile-web-app-capable" content="yes">
        <script src="https://kit.fontawesome.com/8aee9abc8a.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" type="text/css" href="<?= URL_PUBLIC ?>temple_mobile/css/customer.css" />
        <link rel="stylesheet" type="text/css" href="<?= URL_PUBLIC ?>temple_mobile/bootstrap/css/bootstrap.min.css"> 
        <link rel="stylesheet" type="text/css" href="<?= URL_PUBLIC ?>temple_mobile/style.css">
        <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300&family=Roboto:wght@300;400&display=swap" rel="stylesheet">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">   
        <script type="text/javascript" src="<?= URL_PUBLIC ?>temple_mobile/js/jquery-3.5.1.min.js"></script> 
        <script type="text/javascript" src="<?= URL_PUBLIC ?>temple_mobile/bootstrap/js/bootstrap.js"></script>   
        <script type="text/javascript" src="<?= URL_PUBLIC ?>temple_mobile/js/jquery.main.min.js"></script>
        <script type="text/javascript" src="<?= URL_PUBLIC ?>temple_mobile/js/jquery.validate.js"></script>
        <script type="text/javascript" src="<?= URL_PUBLIC ?>temple_mobile/js/jquery.blockUI.min.js"></script>
        <script type="text/javascript" src="<?= URL_PUBLIC ?>temple_mobile/js/jquery.countdown.min.js"></script>
        <script type="text/javascript" src="<?= URL_PUBLIC ?>temple_mobile/js/customer.js"></script>
        
        <script type="text/javascript">
            <?php 
            if (isset($_SESSION['lang'])){ 
                if($_SESSION['lang']=="VN"){
                    $lang="vn";
                }
                if($_SESSION['lang']=="EN"){
                    $lang="en";
                }
                if($_SESSION['lang']=="KR"){
                    $lang="kr";
                }
            }else{
                $lang="en";
            }?>
            var lang="<?=$lang?>";
        </script>        
        <script type="text/javascript">
            <?php echo 'jsData=' . json_encode($this->getData('jsData')); ?>            
            var $baseUrl = "<?= URL_BASE; ?>";
        </script>
        <script type="text/javascript">
        let play = function(){document.getElementById("audio").play()}
        let play1 = function(){document.getElementById("video").play()};
        </script>
        <?php if (isset($_SESSION['lang']) && $_SESSION['lang'] == 'KR') { ?>
            <!-- load font KR -->
            <style>
                body {font-family: 'Nanum Gothic', 'Roboto', sans-serif;}
                @font-face { 
                        font-family: 'NanumGothic';
                        src: url('<?= URL_BASE ?>/public/font/NanumGothic.eot');
                        src: url('<?= URL_BASE ?>/public/font/NanumGothic.eot') format('embedded-opentype'),
                        url('<?= URL_BASE ?>/public/font/NanumGothic.woff') format('woff');
                }
                .divlangkr{font-family: 'NanumGothic';}
                .fullScreen {
                    width: 100%;
                    height: 100%;
                    position: absolute;
                    top: 0;
                    left: 0;
                }
            </style>
        <?php }?>  
        <script>
        var modeCurrent =-1;
        function start (mode) {
        	modeCurrent=document.getElementById('modeCurrent').value;
            var iframe= document.getElementById('iframe_callback');
            if(mode==1 && mode!=modeCurrent) iframe.src = "<?= $this->route('setting') ?>"; // assign url to src property
            if(mode==2 && mode!=modeCurrent) iframe.src = "<?= $this->route('setting2') ?>"; // assign url to src property
            if(mode==3 && mode!=modeCurrent) iframe.src = "<?= $this->route('setting3') ?>"; // assign url to src property
			if(mode==0 && mode!=modeCurrent) iframe.src = "<?= $this->route('danhsachtv') ?>";
			if(modeCurrent!=mode){
				$('.div_load_alert').css("display", "block");
				iframe.onload = function() {
					$('.div_load_alert').css("display", "none");
    				var elem = document.documentElement;
    	            if (elem.requestFullscreen) { iframe.requestFullscreen(); }
    	            else if (elem.mozRequestFullScreen) { iframe.mozRequestFullScreen(); }
    	            else if (elem.webkitRequestFullscreen) { iframe.webkitRequestFullscreen(); }
    	            else if (elem.webkitEnterFullscreen) { iframe.webkitEnterFullscreen();}
    	            else if (elem.msRequestFullscreen) { iframe.msRequestFullscreen(); }
    	            
    	          	iframe.style.display = "block";
    	          	screen.orientation.lock("landscape");
	        	}
	        	
			}else{
				var elem = document.documentElement;
				if (elem.requestFullscreen) { iframe.requestFullscreen(); }
	            else if (elem.mozRequestFullScreen) { iframe.mozRequestFullScreen(); }
	            else if (elem.webkitRequestFullscreen) { iframe.webkitRequestFullscreen(); }
	            else if (elem.webkitEnterFullscreen) { iframe.webkitEnterFullscreen(); }
	            else if (elem.msRequestFullscreen) { iframe.msRequestFullscreen(); }
	            
	          	iframe.style.display = "block";
	          	screen.orientation.lock("landscape");
			}
          	modeCurrent=mode;
			document.getElementById('modeCurrent').value=mode;
        }

        function onfullscreen() {
        	modeCurrent=document.getElementById('modeCurrent').value;
			if(modeCurrent==-1){
				var elem = document.documentElement;
	            if (elem.requestFullscreen) { elem.requestFullscreen(); }
	            else if (elem.mozRequestFullScreen) { elem.mozRequestFullScreen(); }
	            else if (elem.webkitRequestFullscreen) { elem.webkitRequestFullscreen(); }
	            else if (elem.webkitEnterFullscreen) { elem.webkitEnterFullscreen(); }
	            else if (elem.msRequestFullscreen) { elem.msRequestFullscreen(); }
	            
	          	screen.orientation.lock("landscape");
			}else{
				var iframe= document.getElementById('iframe_callback');
 				var elem = document.documentElement;
	            if (elem.requestFullscreen) { iframe.requestFullscreen(); }
	            else if (elem.mozRequestFullScreen) { iframe.mozRequestFullScreen(); }
	            else if (elem.webkitRequestFullscreen) { iframe.webkitRequestFullscreen(); }
	            else if (elem.webkitEnterFullscreen) { iframe.webkitEnterFullscreen(); }
	            else if (elem.msRequestFullscreen) { iframe.msRequestFullscreen(); }
	            
	          	iframe.style.display = "block";
	          	screen.orientation.lock("landscape");
			}
        }
        
        function closeWin()   // Tested Code
        {
        	var someIframe = window.parent.document.getElementById('iframe_callback');
        	someIframe.style.display = "none";
        	window.parent.document.getElementById('modeCurrent').value =-1;
        	
        	if (someIframe.exitFullscreen) { someIframe.exitFullscreen(); }
        	else if(someIframe.mozCancelFullScreen){ someIframe.mozCancelFullScreen(); }
        	else if (someIframe.webkitExitFullscreen) { someIframe.webkitExitFullscreen(); }
        	else if (someIframe.msExitFullscreen) { someIframe.msExitFullscreen();}
        	
        	var elem = window.parent.document.documentElement;
            if (elem.requestFullscreen) { elem.requestFullscreen(); }
            else if (elem.mozRequestFullScreen) { elem.mozRequestFullScreen(); }
            else if (elem.webkitRequestFullscreen) { elem.webkitRequestFullscreen(); }
            else if (elem.webkitEnterFullscreen) { elem.webkitEnterFullscreen(); }
            else if (elem.msRequestFullscreen) { elem.msRequestFullscreen(); }
            
          	screen.orientation.lock("landscape");
        }
        //function check event back page
        var co=0;
        function acecptComeBack(url){
        	window.history.pushState({page: 1}, "", "");//luu trang thai cua trang
            window.onpopstate = function(event) {// check event click back
            	console.log("location: " + document.location + ", state: " + JSON.stringify(event.state));
                if(event){
                    $('#thongbaoBackModal').modal('show');
                    $('.ok_back').on('click', function() {
                    	console.log("back"+(co-1));  
                    	$('#thongbaoBackModal').modal('hide');
                    	// window.location = url;
                    });
                    window.history.pushState({page: 1}, "", "");// chan click back nhieu lan
                    co++;
                    return;
                }
            }
        }

    	</script> 
       
        
    </head>
    	<?php 
    	$action = isset($this->_params['action']) ? $this->_params['action'] : 'index';
    	$controller = isset($this->_params['controller']) ? $this->_params['controller'] : 'site';
    	$classbody="bodydoc";
    	
        if($controller=="dashboard"&&$action=="start3"){
            
        }elseif($controller=="dashboard"&&$action=="setting3"){
        
        }else{
       
        }
        
        
        ?>
    
    <body class="<?=$classbody?>" >        
        <input type="hidden" id="modeCurrent" value="-1"/>
        <input type="hidden" id="pos_number" value=""/>
        <input type="hidden" id="pos_char" value=""/>      
        
        <?php include_once(PATH_APPLICATION . 'view/popup/home_mobile.php') ?>
        <?php require  $this->_fileView; ?>                
    </body>
</html>