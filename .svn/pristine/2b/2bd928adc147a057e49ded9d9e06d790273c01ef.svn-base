<!---------------------------------- end chon nguoi choi va nhap diem ket thuc-------------------------------------->
<div class="container-fluid bgt-mode">
    <div class="row">
        <div class="col-md-4 logo">
            <img src="<?= URL_PUBLIC ?>images/logo-1.png" alt="Billiard">
        </div>
        <div class="col-md-4 text-center">
            <div class="pt-70 text-center m-0 m-auto">
                <h2 class="title_header"><?= $this->language("l_mode2_dg") ?></h2>
            </div>
        </div>
        <div class="col-md-4 text-center">
            <div class="float-left pt-70 text-center m-0 m-auto">
                
            </div>
        </div>
    </div>
    <div class="row">
        <div class="container-sm pt-lg-2 pb-lg-5" style="margin-top: 100px">
            <div class="row main-bgt w-85 m-0 m-auto" >
                <div class="col-12 bgt-blue p-0">
                    <div class="title b-line text-center"><h3><?= $this->language("l_dg_select_name_point") ?></h3></div>
                    <input type="hidden" id="number_player_mode3" value="2" />
                    <div class="main-ct list-luot-co b-line">
                        <div class="row">
                            <div class="chon_nkc m-0 m-auto">
                                <div class="float-left w-45 mt-4 mb-4">
                                    <a type="button" class="w-100" onclick="showpopupuser(1)">
                                    <div class="thanh-vien-item box-shadow">
                                        <div class="w-100 text-center mt-3">
                                            <div class="circle-big float-none m-0 m-auto"><img src="<?= URL_PUBLIC ?>images/thanh-vien-2.png"></div>
                                        </div>
                                        <div class="thanh-vien-ct w-100" >
                                            <div class="name name1 name-thanh-vien text-center w-100 p-0 lh-40 pt-2 mt-2"><?= $this->language("mode3_dg1") ?> A</div>
                                            <div class="detail_tv mt-2">
                                                <div class="w-100 float-left text-center">
                                                    <p class="point point1 diem-chap-sm m-0">10</p>
                                                </div>
                                            </div>
                                        </div>	
                                    </div>
                                    <input type="hidden" id="settingname1" value="<?= $this->language("mode3_dg1") ?> A" />
                                    <input type="hidden" id="settingpoint1" value="10" />   
                                    </a>
                                </div>
                                <div class="w-10 float-left text-center mt-4 mb-4">
                                    
                                </div>
                                <div  class="float-left w-45 mt-4 mb-4">
                                    <a type="button" class="w-100"  onclick="showpopupuser(2)">
                                    <div class="thanh-vien-item box-shadow">
                                        <div class="w-100 text-center mt-3">
                                            <div class="circle-big float-none m-0 m-auto"><img src="<?= URL_PUBLIC ?>images/thanh-vien-2.png"></div>
                                        </div>
                                        <div class="thanh-vien-ct w-100">
                                            <div class="name name2 name-thanh-vien text-center w-100 p-0 lh-40 pt-2 mt-2"><?= $this->language("mode3_dg1") ?> B</div>
                                            <div class="detail_tv mt-2">
                                                <div class="w-100 float-left text-center">
                                                    <p class="point point2 diem-chap-sm m-0">10</p>
                                                </div>
                                            </div>
                                        </div>	
                                    </div>
                                    <input type="hidden" id="settingname2" value="<?= $this->language("mode3_dg1") ?> B" />
                                    <input type="hidden" id="settingpoint2" value="10" />
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer t-line pb-4 pt-4">
                        <div class="m-0 m-auto">
                            <a type="button" class="btn btn-primary btn-blue" href="<?= $this->route('home') ?>"></i> <?= $this->language("l_mode2_close") ?></a>
                            <a type="button" class="btn button_start btn-primary btn-or-5"><?= $this->language("l_start") ?></a>
                        </div>
                    </div>									
                </div>
            </div>
        </div>
    </div>
</div>
<!---------------------------------- xu ly js -------------------------------------->
<?php include(PATH_APPLICATION . 'view/part/popup_mode3.php'); ?>
<script>
    function showpopupuser(pos) {
        var name = document.getElementById("settingname" + pos).value;
        var point = document.getElementById("settingpoint" + pos).value;
        document.getElementById("name" + pos).value = name;
        document.getElementById("diem" + pos).value = point;
        $("#usernamepoint" + pos).modal('show');
    }

    function modecancel(pos) {
        $('#usernamepoint' + pos).modal('hide');
    }

    function modeok(pos) {
        var name = document.getElementById("name" + pos).value;
        document.getElementById("settingname" + pos).value = name;
        $('.name' + pos).html(name);
        var diem = document.getElementById("diem" + pos).value;
        diem = parseInt(diem);
        document.getElementById("settingpoint" + pos).value = diem;
        $('.point' + pos).html(diem);
        $('#usernamepoint' + pos).modal('hide');
    }
</script>
<script type="text/javascript">
    $(document).ready(function() {
        $('.button_start').on('click', function() {
            var number_player = document.getElementById("number_player_mode3").value;
            var error = '';
            var name = '';
            var name1 = '';
            var point = '';
            var strname = '';
            var strpoint = '';
            for (var i = 1; i <= number_player; i++) {
                name = document.getElementById("settingname" + i).value;
                point = document.getElementById("settingpoint" + i).value;
                name1 = name.replace(/\s/g, '');
                if (name1 == "") {
                    error += "<?= $this->language("mode3_dg3") ?> " + i + "<br/>";
                }
                if (name == "") {
                    error += "<?= $this->language("mode3_dg3") ?> " + i + "<br/>";
                }
                if (point == "") {
                    error += "<?= $this->language("mode3_dg4") ?> " + i + "<br/>";
                }
                if (parseInt(point) == 0) {
                    error += name +": <?= $this->language("l_mode3_dg5") ?><br/>";
                }
                strname = name + "," + strname;
                strpoint = point + "," + strpoint;
            }

            if (error != '') {
                $("#mess").html(error);
                $('#messModal').modal('show');
            } else {
                strname = strname.slice(0, -1);
                strpoint = strpoint.slice(0, -1);
                $('.div_load_alert').css("display", "block");
                $.fn_ajax('setting2', { 'strname': strname, 'strpoint': strpoint, 'number_player': number_player }, function(result) {
                    console.log(result)
                    if (result.flag == true) {
                        window.location = "<?= $this->route('start2') ?>";
                    }
                }, true);
            }
        });
    });
</script>
<script src="<?= URL_PUBLIC ?>js/keyboard_mode3_name1.js"></script>
<script src="<?= URL_PUBLIC ?>js/keyboard_mode3_diem1.js"></script>
<script src="<?= URL_PUBLIC ?>js/keyboard_mode3_name2.js"></script>
<script src="<?= URL_PUBLIC ?>js/keyboard_mode3_diem2.js"></script>
<script src="<?= URL_PUBLIC ?>js/keyboard_mode3_diem6.js"></script>
<script src="<?= URL_PUBLIC ?>js/keyboard_mode3_name3.js"></script>
<script src="<?= URL_PUBLIC ?>js/keyboard_mode3_diem3.js"></script>
<script src="<?= URL_PUBLIC ?>js/keyboard_mode3_name4.js"></script>
<script src="<?= URL_PUBLIC ?>js/keyboard_mode3_diem4.js"></script>
<script src="<?= URL_PUBLIC ?>js/keyboard_mode3_name5.js"></script>
<script src="<?= URL_PUBLIC ?>js/keyboard_mode3_diem5.js"></script>
<style>
    .keyboard__key_empty {
        cursor: auto;
        background: none;
        font-size: 20px;
        font-weight: bold;
        height: 70px;
        margin: 10px;
    }

    .keyboard__key1,
    .keyboard__key2,
    .keyboard__key3,
    .keyboard__key4,
    .keyboard__key5,
    .keyboard__key6,
    .keyboard__key7,
    .keyboard__key8,
    .keyboard__key9,
    .keyboard__key0,
    .keyboard__keybackspace,
    .keyboard__keydone,
    .keyboard__keyenter {
        font-size: 20px;
        font-weight: bold;
        height: 70px;
        margin: 10px;
    }
</style>

<div class="div_load_alert">
    <div class="main_mess">
        <p><?= $this->language("l_main_mess") ?></p>
        <img style="width: 200px;" src="<?= URL_PUBLIC ?>img/load.gif" />
    </div>
</div>