import React, { PureComponent } from 'react';
import { View, Text, StyleSheet, TouchableOpacity, ScrollView, Dimensions, AsyncStorage } from 'react-native';
import { TabView, SceneMap, TabViewPage, TabBar } from 'react-native-tab-view';
import { Header } from 'react-native-elements';
import { ActivityIndicator, FlatList } from 'react-native';
import TabQuestion from './TabQuestion';

import { data } from './define';
const server = data[0];

export default class Question extends PureComponent {
  static navigationOptions = {
         title: '문의관리',
         headerStyle: {
           color: '#DB4437'
         },
         headerTintColor: '#DB4437',
         headerTitleStyle: {
            fontWeight: 'bold',
         },
    };
  constructor(props) {
       super(props);
       this.state = {
         index: -1,
         routes:[
            { key: 0, title: '전체' },
            { key: 1, title: 'COUPANG'},
            { key: 2, title: 'WMAKE' },
            { key: 3, title: 'TMON' },
            { key: 4, title: 'GMKT' },
            { key: 5, title: 'AUCTION' },
            { key: 6, title: '11ST' },
         ],
       };
       this.renderScene = this.renderScene.bind();
  }

  renderHeader = props => (
      <TabBar
        {...props}
        scrollEnabled
        indicatorStyle={styles.indicator}
        activeColor="#6d578b"
        inactiveColor="#c2c3c8"
        activeTintColor= 'blue'
        activeTintColor= '#0a0a0a'
        inactiveTintColor= 'grey'
        activeBackgroundColor = 'red'
        inactiveOpacity={0.5}
        activeOpacity={1.0}
        style={styles.tabbar}
        tabStyle={styles.tab}
        labelStyle={styles.label}
       />
  );

  renderScene = ({ route }) => {

      if (Math.abs(this.state.index - this.state.routes.indexOf(route)) == 0){
          let method='';
          switch (route.key) {
            case 0:
                 method="";
                 break;
            case 1:
                  method="COUPANG";
                  break;
            case 2:
                  method="WMAKE";
                  break;
            case 3:
                  method="TMON";
                  break;
            case 4:
                  method="GMKT";
                  break;
            case 5:
                  method="AUCTION";
                  break;
            case 6:
                  method="ST";
                  break;
            default :
                  return null;

          }
          return <View style={[styles.scene, { backgroundColor: '#ffffff' }]} ><TabQuestion method={method} /></View>;
      }

      if(this.state.index==-1)
          this.setState({index:0 });
  };
  handleIndexChange = (index: number) => {
      this.setState({index, });
  }
  render () {
    const { navigation } = this.props;
    return (
      <TabView
         navigationState={this.state}
         renderTabBar={this.renderHeader}
         renderHeader={this.renderHeader}
         renderScene={this.renderScene}
         onIndexChange={this.handleIndexChange}
         initialLayout={{ width: Dimensions.get('window').width, height: Dimensions.get('window').height}}
      />
    );
  }
}
const styles = StyleSheet.create({
 scene: {
     flex: 1,
   },
   navigationBarTitleStyle: {
       backgroundColor: '#DB4437',
       color: '#DB4437'
   },
  container: { flex: 1, padding: 16, paddingTop: 30, backgroundColor: '#fff' },
  header: { height: 50, backgroundColor: '#537791' },
  text: { textAlign: 'center', fontWeight: '100' },
  dataWrapper: { marginTop: -1 },
  row: { height: 40, backgroundColor: '#E7E6E1' },
  tabbar: {
    height: 40,
    backgroundColor: '#f7f7f7', // mau nen tab
    borderTopWidth: 1,
    borderTopColor: 'red',

  },

  tab: {
    width: 80,
    minHeight: 40 // here
  },
  indicator: {
    backgroundColor: '#DB4437'  // mau gach bottom tab active
  },
  label: {
    color: '#000',  // mau chu text tab
    fontWeight: '400',
    fontSize: 11
  },
});

